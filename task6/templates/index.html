<!DOCTYPE html>
<html>
<head>
    <title>Fake User Generator</title>
    <style>
        body { font-family: Arial; margin: 40px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .controls { background: #f5f5f5; padding: 20px; border-radius: 5px; margin-bottom: 20px; }
        .control-group { margin-bottom: 15px; }
        label { display: inline-block; width: 120px; }
        select, input { padding: 8px; width: 200px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background: #0056b3; }
        .stats { margin: 20px 0; padding: 15px; background: #e9ecef; border-radius: 5px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: #007bff; color: white; }
        tr:hover { background: #f5f5f5; }
        .loading { display: none; color: #007bff; margin: 20px 0; }
        .error { color: #dc3545; background: #f8d7da; padding: 10px; border-radius: 4px; margin: 10px 0; display: none; }
        .nav-buttons { margin-top: 15px; }
        .nav-buttons a { text-decoration: none; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Fake User Generator</h1>
        
        <div class="controls">
            <div class="control-group">
                <label for="locale">Locale:</label>
                <select id="locale">
                    <option value="en_US">USA</option>
                    <option value="de_DE">Germany</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="seed">Seed Value:</label>
                <input type="number" id="seed" value="12345">
            </div>
            
            <div class="control-group">
                <label for="batchSize">Batch Size:</label>
                <input type="number" id="batchSize" value="10" min="1" max="100">
            </div>
            
            <!-- Main Action Buttons -->
            <button onclick="generate()">Generate</button>
            <button onclick="nextBatch()">Next Batch</button>
            <button onclick="resetGenerator()">Reset</button>
            
            <!-- Navigation Buttons -->
            <div class="nav-buttons">
                <a href="/docs" target="_blank">
                    <button style="background:#28a745;">ðŸ“š Documentation</button>
                </a>
                <a href="/benchmark_test" target="_blank">
                    <button style="background:#17a2b8;">âš¡ Run Benchmark</button>
                </a>
                <button style="background:#6c757d;" onclick="showPerformanceInfo()">ðŸ“Š Performance Info</button>
            </div>
        </div>
        
        <div class="stats">
            Batch: <span id="currentBatch">0</span> | 
            Total Generated: <span id="totalGenerated">0</span> | 
            Seed: <span id="currentSeed">12345</span>
        </div>
        
        <div class="loading" id="loading">Generating users...</div>
        <div class="error" id="errorContainer"></div>
        
        <table id="usersTable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Address</th>
                    <th>Coordinates</th>
                    <th>Height (cm)</th>
                    <th>Weight (kg)</th>
                </tr>
            </thead>
            <tbody id="usersBody">
                <tr><td colspan="9">No users generated yet</td></tr>
            </tbody>
        </table>
    </div>

    <script>
        let currentBatchIndex = 0;
        let currentSeed = 12345;
        let currentLocale = 'en_US';
        let currentBatchSize = 10;
        
        function generate() {
            currentBatchIndex = 0;
            currentSeed = parseInt(document.getElementById('seed').value);
            currentLocale = document.getElementById('locale').value;
            currentBatchSize = parseInt(document.getElementById('batchSize').value);
            
            fetchUsers();
        }
        
        function nextBatch() {
            currentBatchIndex++;
            fetchUsers();
        }
        
        function resetGenerator() {
            currentBatchIndex = 0;
            currentSeed = 12345;
            currentLocale = 'en_US';
            currentBatchSize = 10;
            
            document.getElementById('seed').value = currentSeed;
            document.getElementById('locale').value = currentLocale;
            document.getElementById('batchSize').value = currentBatchSize;
            document.getElementById('currentBatch').textContent = '0';
            document.getElementById('totalGenerated').textContent = '0';
            document.getElementById('currentSeed').textContent = '12345';
            document.getElementById('errorContainer').style.display = 'none';
            document.getElementById('usersBody').innerHTML = '<tr><td colspan="9">No users generated yet</td></tr>';
        }
        
        function fetchUsers() {
            const loading = document.getElementById('loading');
            const errorContainer = document.getElementById('errorContainer');
            
            loading.style.display = 'block';
            errorContainer.style.display = 'none';
            
            fetch('/generate', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    locale: currentLocale,
                    seed: currentSeed,
                    batch_index: currentBatchIndex,
                    batch_size: currentBatchSize
                })
            })
            .then(response => response.json())
            .then(data => {
                loading.style.display = 'none';
                
                if (data.success) {
                    displayUsers(data.users);
                    updateStats(data);
                    // Show performance info in console
                    console.log('Performance:', data.performance);
                } else {
                    showError(data.error);
                }
            })
            .catch(error => {
                loading.style.display = 'none';
                showError('Network error: ' + error.message);
            });
        }
        
        function displayUsers(users) {
            const tbody = document.getElementById('usersBody');
            
            if (users.length === 0) {
                tbody.innerHTML = '<tr><td colspan="9">No users generated</td></tr>';
                return;
            }
            
            let html = '';
            users.forEach(user => {
                html += `
                <tr>
                    <td>${user.id || user.user_id || 'N/A'}</td>
                    <td>${user.first_name}</td>
                    <td>${user.last_name}</td>
                    <td>${user.email}</td>
                    <td>${user.phone}</td>
                    <td>${user.address || 'N/A'}</td>
                    <td>${(user.latitude || 0).toFixed(4)}, ${(user.longitude || 0).toFixed(4)}</td>
                    <td>${(user.height_cm || 0).toFixed(1)}</td>
                    <td>${(user.weight_kg || 0).toFixed(1)}</td>
                </tr>`;
            });
            
            tbody.innerHTML = html;
        }
        
        function updateStats(data) {
            document.getElementById('currentBatch').textContent = data.batch_index;
            document.getElementById('totalGenerated').textContent = data.total_generated;
            document.getElementById('currentSeed').textContent = data.seed;
        }
        
        function showError(message) {
            const errorContainer = document.getElementById('errorContainer');
            errorContainer.textContent = 'Error: ' + message;
            errorContainer.style.display = 'block';
        }
        
        function showPerformanceInfo() {
            alert('Performance metrics are automatically calculated with each generation.\n\n' +
                  'Check your browser console (F12 â†’ Console) to see detailed performance data including:\n' +
                  'â€¢ Generation time (milliseconds)\n' +
                  'â€¢ Users per second\n' +
                  'â€¢ Batch size\n\n' +
                  'For comprehensive benchmark tests, click the "âš¡ Run Benchmark" button.');
        }
        
        // Initialize
        resetGenerator();
    </script>
</body>
</html>